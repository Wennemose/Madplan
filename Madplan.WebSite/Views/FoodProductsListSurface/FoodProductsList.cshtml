@using Madplan.WebSite.Controllers.SurfaceControllers
@using Madplan.WebSite.Models
@using Madplan.ClassLibrary.Models.FoodProduct
@model FoodProductsListModel

<script id="foodproductTemplate" type="text/x-jsrender">
	{{for FoodProducts}}
	<tr>
		<td>{{>Name}}</td>
		<td>{{>Protein}}</td>
		<td>{{>Calories}}</td>
		<td>{{>Fat}}</td>
		<td>{{>Carbonhydrate}}</td>
		<td>
			<div class="btn-group">
				<a class="btn btn-primary" href="#"><i class="icon_plus_alt2"></i></a>
				<a class="btn btn-success" href="#"><i class="icon_check_alt2"></i></a>
				<a class="btn btn-danger" href="#"><i class="icon_close_alt2"></i></a>
			</div>
		</td>
	</tr>
	{{/for}}

</script>

<script type="text/javascript">
	function ShowResults(data) {
		$("#foodProductsTable").html(
			$("#foodproductTemplate").render(data)
			);
	};

	function ShowError(data) {
		alert(data.result);
	};
</script>

@using (Ajax.BeginForm("SearchProducts", "FoodProductsListSurface", new AjaxOptions { HttpMethod = "POST",  OnFailure = "ShowError", OnSuccess = "ShowResults" }))
{ 
	<fieldset>
        <legend>FoodProductsListModel</legend>

        
		<div class="editor-label">
            @Html.LabelFor(model => model.Query)
        </div>

        <div class="editor-field">
            @Html.EditorFor(model => model.Query)
            @Html.ValidationMessageFor(model => model.Query)
        </div>

        <p>
            <input type="submit" value="Search" />
        </p>
    </fieldset>
}
<div class="row">
	<div class="col-lg-12">
		<section class="panel">
			<header class="panel-heading">
				TODO?
			</header>
			<table id="foodproductstable" class="table table-striped table-advance table-hover">
				<thead>
					<tr>
						<th><i class="icon_profile"></i>Navn</th>
						<th><i class="icon_calendar"></i>Proteiner</th>
						<th><i class="icon_mail_alt"></i>Kalorier</th>
						<th><i class="icon_pin_alt"></i>Fedt</th>
						<th><i class="icon_mobile"></i>Kulhydrater</th>
					</tr>
				</thead>
				<tbody id="foodProductsTable">
				</tbody>
			</table>
		</section>
	</div>
</div>